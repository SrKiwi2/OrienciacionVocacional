<!DOCTYPE html>
<html lang="en">

<head th:replace="~{layout_test/head :: head}">
</head>

<body class="template-color-1 nft-body-connect">
    <div id="particles-js"></div>
    <!-- start header area -->
    <!-- Start Header -->
    <header class="rn-header haeder-default header--sticky">
        <div class="container p-3">
            <div class="header-inner d-flex justify-content-between align-items-center">
                <!-- Logo alineado a la izquierda -->
                <div class="header-left">
                    <div class="logo-thumbnail logo-custom-css">
                        <a class="logo-light" href="/inicio_test">
                            <img src="assets_registro/images/logo/logotest1.png" alt="nft-logo">
                        </a>
                        <a class="logo-dark" href="/inicio_test">
                            <img src="assets_registro/images/logo/logotest1.png" alt="nft-logo">
                        </a>
                    </div>
                </div>

                <!-- Elementos alineados a la derecha -->
                <div class="header-right d-flex align-items-center">
                    <!-- Switcher de tema -->
                    <div id="my_switcher" class="my_switcher setting-option me-3">
                        <ul class="d-flex list-unstyled mb-0">
                            <li class="me-2">
                                <a href="javascript: void(0);" data-theme="light" class="setColor light">
                                    <img class="sun-image" src="assets_registro/images/icons/sun-01.svg"
                                        alt="Sun images">
                                </a>
                            </li>
                            <li>
                                <a href="javascript: void(0);" data-theme="dark" class="setColor dark">
                                    <img class="Victor Image" src="assets_registro/images/icons/vector.svg"
                                        alt="Vector Images">
                                </a>
                            </li>
                        </ul>
                    </div>

                    <!-- Botón de iniciar sesión -->
                    <button type="button" class="btn btn-login my_switcher shadow" data-bs-toggle="modal"
                        data-bs-target="#uploadModal">
                        <b class="d-none d-md-inline " style="font-size: 15px;">INICIAR SESION</b>
                        <b class="d-inline d-md-none " style="font-size: 15px;">INGRESAR</b>
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- End Header Area -->
    <div class="pb_sm--0 banner-area banner-svg bg-image-svg-1 bg_image rn-section-gap with-down-shadow pt-3">
        <div class="container">
            <div class="row g-5 d-flex align-items-center">
                <div class="col-lg-7 order-lg-1 order-md-2 order-sm-2 order-2">
                    <div class="banner-left-bg-svg" >
                        <h1 class="title" style="text-align: center;">ORIENTACIÓN VOCACIONAL</h1>
                        <p class="disc animated" style="text-align: justify;">
                            <span class="point line-1" style="color: rgb(243, 156, 18);"></span>Con la realización de este test, demuestras tus capacidades y mejora tus dificultades.</span>
                            <span class="point line-2" style="color: rgb(1, 133, 185);">Busca carreras universitarias relacionadas con tus habilidades y aptitudes.</span>
                            <br><span class="point line-3" style="color: rgb(46, 204, 113);">Organiza tus ideas para tomar una mejor decisión.</span>
                            <br><br>
                            <span class="point line-3" style="color: rgb(219, 0, 0);">Si haz perdido conexion en tu test vocacional, por favor introduce tu apellido paterno en mayuscula como usuario y tu C.I. como contraseña</span>
                            <span>-> En INICIAR SESIÓN</span>
                        </p>                                                
                    </div>                                       
                    <!-- <button type="button" class="btn btn-warning mt--30" style="width: 100%;" data-bs-toggle="modal"
                    data-bs-target="#placebidModal"><b style="font-size: 35px;">INICIAR AHORA</b></button> -->
                    <div class="button-wrapper">
                        <a href="#" class="button" data-bs-toggle="modal"
                        data-bs-target="#placebidModal">
                           <button class="button__content">
                              <span class="button__text">INICIAR AHORA</span>
                              <!-- <i class="ri-download-cloud-fill button__icon"></i> -->
                        
                              <div class="button__reflection-1"></div>
                              <div class="button__reflection-2"></div>
                           </button>
                        
                           <img src="assets_registro/images/star.png" alt="" class="button__star-1">
                           <img src="assets_registro/images/star.png" alt="" class="button__star-2">
                           <img src="assets_registro/images/circle.png" alt="" class="button__circle-1">
                           <img src="assets_registro/images/circle.png" alt="" class="button__circle-2">
                           <img src="assets_registro/images/diamond.png" alt="" class="button__diamond">
                           <img src="assets_registro/images/triangle.png" alt="" class="button__triangle">
                           
                           <div class="button__shadow"></div>
                        </a>
                     </div>
                </div>
                <div class="col-lg-5 order-lg-2 order-md-1 order-sm-1 order-1">
                    <div class="tilt-image-banner-16 mt-2" style="text-align: center;">
                        <img class="tilt" src="assets_registro/images/fondo_test.png" alt="Nft-profile">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- modal registro -->
    <div class="rn-popup-modal placebid-modal-wrapper modal fade" id="placebidModal" tabindex="-1" aria-hidden="true">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i data-feather="x"></i></button>
        <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"
            style="max-width: 100%; width: 100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">FORMULARIO DE PRE - REGISTRO</h3>
                </div>
                <div class="modal-body">
                    <div class="form-wrapper-one registration-area">
                        <form class="form" action="/guardar_estudiante_inicio" id="formularioPreRegistroInicio" method="post">
                            <input type="hidden" th:field="${persona.idPersona}">
                            <p>INTRODUCE TUS DATOS PERSONALES</p>
                            <hr>
                            <div class="row">
                                <div class="col-md-4 col-xm-12">
                                    <label class="form-label">Nombres</label>
                                    <input type="text" th:field="${persona.nombre}" autocomplete="off" name="nombre"
                                        placeholder="Introduce tu nombre">
                                </div>
                                <div class="col-md-4 col-xm-12">
                                    <label class="form-label">Apellido Paterno</label>
                                    <input type="text" th:field="${persona.paterno}" autocomplete="off" name="paterno"
                                        placeholder="Introduce tu apellido parterno">
                                </div>

                                <div class="col-md-4 col-xm-12">
                                    <label class="form-label">Apellido Materno</label>
                                    <input type="text" th:field="${persona.materno}" autocomplete="off" name="materno"
                                        placeholder="Introduce tu apellido materno">
                                </div>
                            </div><br>

                            <div class="row">
                                <div class="col-md-2 col-xm-12">
                                    <label class="form-label">Numero de C.I.</label>
                                    <input type="text" th:field="${persona.ci}" autocomplete="off" name="ci" placeholder="Introduce tu C.I" oninput="this.value = this.value.replace(/\s/g, '')" required>
                                </div>
                                <div class="col-md-2 col-xm-12">
                                    <label class="form-label">Genero</label>
                                    <select class="form-control select2" name="genero" id="genero">
                                        <th:block th:each="g : ${generos}">
                                            <option th:value="${g.idGenero}" th:text="${g.nombreGenero}"></option>
                                        </th:block>
                                    </select>
                                </div>

                                <div class="col-md-2 col-xm-12">
                                    <label class="form-label">Nacionalidad</label>
                                    <select class="form-select" name="nacionalidad" id="nacionalidad">
                                        <th:block th:each="nac : ${nacionalidades}">
                                            <option th:value="${nac.idNacionalidad}"
                                                th:text="${nac.nombreNacionalidad}"></option>
                                        </th:block>
                                    </select>
                                </div>
                                <div class="col-md-3 col-xm-12">
                                    <label class="form-label">Correo</label>
                                    <input id="value" type="email" autocomplete="off" placeholder="Introduce tu correo electronico" name="correo">
                                </div>
                                <div class="col-md-3 col-xm-12">
                                    <label class="form-label">Fecha Nacimiento</label>
                                    <input id="value" type="date" autocomplete="off" name="fecha">
                                </div>
                            </div><br>

                            <p class="mt-3">Datos Academicos</p>
                            <hr>
                            <div class="row">
                                <div class="col-md-6 col-xm-12">
                                    <label class="form-label">Grado</label>
                                    <select class="form-control select2" name="grado" id="grado">
                                        <option value="B">BACHILLER</option>
                                        <option value="6to">6TO SECUNDARIA</option>
                                        <option value="5to">5TO SECUNDARIA</option>
                                        <option value="4to">4TO SECUNDARIA</option>
                                        <option value="O">Otro</option>
                                    </select>
                                </div>
                                <div class="col-md-6 col-xm-12">
                                    <label class="form-label">Colegio</label>
                                    <select class="form-select" name="colegio" id="colegio">
                                        <th:block th:each="colegio : ${colegios}">
                                            <option th:value="${colegio.idColegio}"
                                                th:text="${colegio.nombreColegio}">
                                            </option>
                                        </th:block>
                                    </select>
                                </div>
                            </div>
                            <div class="bit-continue-button ">
                                <div class="row mt-5">
                                    <div class="col-6">
                                        <button style="width: 100%;" type="submit" class="btn btn-info">Enviar<i class="fas fa-check-double fa-lg"></i></button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" style="width: 100%;" class="btn btn-warning" data-bs-dismiss="modal">Cancelar<i class="far fa-circle-xmark fa-lg"></i></button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal LOGIN-->
    <div class="rn-popup-modal upload-modal-wrapper modal fade" id="uploadModal" tabindex="-1" aria-hidden="true">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i data-feather="x"></i></button>
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content share-wrapper">
                <div class="modal-body">
                    <div class="product-style-one no-overlay">
                        <div class="form-wrapper-one">
                            <h4 style="text-align: center;">INICIAR SESION</h4>
                            <form action="/iniciar-sesion" method="POST" id="iniciar">
                                <div class="mb-5">
                                    <label for="exampleInputEmail1" class="form-label">Usuario</label>
                                    <input type="text" name="usuario" id="exampleInputEmail1">
                                </div>
                                <div class="mb-5 position-relative">
                                    <label for="exampleInputPassword1" class="form-label">Contraseña</label>
                                    <input type="password" name="contrasena" id="exampleInputPassword1"
                                        class="form-login password-input">
                                    <span class="password-toggle-icon" onclick="togglePassword(event)"
                                        style="position: absolute; right: 10px; top: 35px; cursor: pointer;">
                                        <i id="toggleIcon" class="bi bi-eye"></i>
                                    </span>
                                </div>
                                <div class="mb-5 rn-check-box">
                                    <input type="checkbox" class="rn-check-box-input" id="exampleCheck1">
                                    <label class="rn-check-box-label" for="exampleCheck1">Remember me
                                        leter</label>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <div class="row w-100">
                                        <div class="col-6 d-flex justify-content-center">
                                            <button type="submit" class="btn btn-info">INICIAR</i></button>
                                        </div>
                                        <div class="col-6 d-flex justify-content-center">
                                            <button type="button" data-bs-dismiss="modal"
                                                class="btn btn-warning">CANCELAR</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <div class="login-area rn-section-gapTop">
                                <div class="col-lg-12 col-md-6 col-sm-12">
                                    <div class="social-share-media form-wrapper-one">
                                        <button class="another-login login-facebook">
                                            <a href="/oauth2/authorization/google" class="another-login login-facebook">
                                                <img class="small-image" src="assets_registro/images/icons/google.png" alt="">
                                                <span>Iniciar con Google</span>
                                            </a>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="rn-footer-one bg-color--1">
        <div class="footer-top">
            <div class="container">
                <div class="row">
                    <ul class="nu-brand-area">
                        <li class="tilt avatar" data-tooltip="Ciencias JurÍdicas y PolÍticas" alt="wallet_image"><img
                                src="assets_registro/images/f1.png" alt="nuron-brand_nft wallet_image"></li>
                        <li class="tilt avatar" data-tooltip="Areas de Ciencias Económicas y Financieras"
                            alt="wallet_image"><img src="assets_registro/images/f2.png"
                                alt="nuron-brand_nft wallet_image"></li>
                        <li class="tilt avatar" data-tooltip="Área de Ciencias Sociales y Humanísticas"
                            alt="wallet_image"><img src="assets_registro/images/f3.png"
                                alt="nuron-brand_nft wallet_image"></li>
                        <li class="tilt avatar" data-tooltip="Facultad de Ciencias de la Salud" alt="wallet_image"><img
                                src="assets_registro/images/f4.png" alt="nuron-brand_nft wallet_image"></li>
                        <li class="tilt avatar" data-tooltip="Facultad de Ingeníeria y Tecnología" alt="wallet_image">
                            <img src="assets_registro/images/f5.png" alt="nuron-brand_nft wallet_image">
                        </li>
                        <li class="tilt avatar" data-tooltip="Área de Ciencias Biológicas y Naturales"alt="wallet_image">
                            <img src="assets_registro/images/f6.png" alt="nuron-brand_nft wallet_image">
                        </li>
                        <li class="tilt avatar" data-tooltip="Unidad de Sistemas de informacion y Comunicación" alt="wallet_image">
                            <img style="margin-top: 20px;" src="assets_registro/images/logoUsic.png" alt="nuron-brand_nft wallet_image">
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div th:replace="~{layout_test/footer :: footer}"></div>
    <div th:replace="~{layout_test/script :: script}"></div>

    <script>
        $(document).ready(function() {
            $('#formularioPreRegistroInicio').submit(function (event) {

                event.preventDefault();
                
                var form = document.getElementById("formularioPreRegistroInicio");
                var action = form.action;
                var formData = $(this).serialize();
                
                $.ajax({    
                    type: 'POST',
                    url: $(this).attr('action'),
                    data: formData,
                    contentType: 'application/x-www-form-urlencoded',
                    success: function (response) {
                        var mensaje = response;
                        if (mensaje === 'Redireccionando') {
                            window.location.href ="/pre_test/1";
                        }else if(mensaje === 'Continuarás con el test vocacional gratuito CHASIDE'){
                            Swal.fire({
                                title: "Aviso!",
                                text: mensaje,
                                icon: "warning",
                                customClass: 'swal2-large' 
                            }),
                            window.location.href ="/pre_test/1";
                        } else if (mensaje === 'Ya haz completado el test vocacional gratuito CHASIDE tus Resultados estan en tu *correo electronico*'){
                            Swal.fire({
                                title: "Aviso!",
                                text: mensaje,
                                icon: "warning",
                                customClass: 'swal2-large' 
                            })
                        } else if (mensaje === 'EL CI introducido no está registrado, para registrarlo completa todos los campos'){
                            Swal.fire({
                                title: "Aviso!",
                                text: mensaje,
                                icon: "warning",
                                customClass: 'swal2-large' 
                            })
                        } else  {
                            Swal.fire(
                                'Error!',
                                'Respuesta inesperada del servidor: ' + mensaje + '.',
                                'error'
                            );
                        }
                    },
                    error: function (xhr, status, error) {
                        toastr.error('Ha ocurrido un error. Por favor, intenta nuevamente.' + xhr, status, error);
                        console.error(error);
                    }
                });
            });
        });

        $(document).ready(function () {
            $('#iniciar').submit(function (event) {
                event.preventDefault();
                var form = document.getElementById("iniciar");
                var action = form.action;
                var formData = $(this).serialize();
                $.ajax({
                    type: 'POST',
                    url: $(this).attr('action'),
                    data: formData,
                    contentType: 'application/x-www-form-urlencoded',
                    success: function (response) {
                        var mensaje = response;
                        if(mensaje === 'Este usuario no esta habilitado'){
                            Swal.fire({
                                title: "Aviso!",
                                text: mensaje,
                                icon: "warning"
                            });
                        }else if(mensaje === 'login estudiante'){
                            window.location.href = "/tests";
                        }else if(mensaje === 'login administrador'){
                            window.location.href = "/admin/vista-administrador";
                        }else if(mensaje === 'Accediendo al test chaside'){
                            window.location.href = "/pre_test/1";
                        }else if(mensaje === 'no existe el usuario'){
                            Swal.fire({
                                title: "Aviso!",
                                text: mensaje,
                                icon: "warning"
                            });
                        }else if(mensaje === 'Ya haz completado el test vocacional gratuito CHASIDE tus Resultados estan en tu *correo electronico*'){
                            Swal.fire({
                                title: "Aviso!",
                                text: mensaje,
                                icon: "warning"
                            });
                        }
                    },
                    error: (xhr, status, error) => {
                        console.error("Error: ", status, error);
                        toastr.error('Ha ocurrido un error. Por favor, intenta nuevamente.');
                    }
                });
            });
        });

        document.addEventListener("DOMContentLoaded", function () {

            $('#colegio').select2({
                dropdownParent: $('#placebidModal')
            });
            $('#grado').select2({
                dropdownParent: $('#placebidModal')
            });
            $('#nacionalidad').select2({
                dropdownParent: $('#placebidModal')
            });
            $('#genero').select2({
                dropdownParent: $('#placebidModal')
            });
        });

        /*PASS*/
        function togglePassword(event) {
            event.preventDefault();
            event.stopPropagation();

            var passwordInput = document.getElementById("exampleInputPassword1");
            var toggleIcon = document.getElementById("toggleIcon");

            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                toggleIcon.classList.remove("bi-eye");
                toggleIcon.classList.add("bi-eye-slash");
            } else {
                passwordInput.type = "password";
                toggleIcon.classList.remove("bi-eye-slash");
                toggleIcon.classList.add("bi-eye");
            }
        }

    </script>
</body>
</html>